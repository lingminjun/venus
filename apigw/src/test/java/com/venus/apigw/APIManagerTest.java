package com.venus.apigw;

import com.alibaba.fastjson.JSON;
import com.venus.apigw.db.APIPojo;
import com.venus.apigw.db.DBUtil;
import com.venus.apigw.document.entities.Response;
import com.venus.esb.ESBAPIInfo;
import com.venus.esb.config.ESBConfigCenter;
import com.venus.esb.lang.ESBConsts;
import com.venus.esb.lang.ESBDeviceToken;
import com.venus.esb.lang.ESBSTDKeys;
import com.venus.esb.lang.ESBToken;
import com.venus.esb.sign.ESBAPIAlgorithm;
import com.venus.esb.sign.ESBAPISignature;
import com.venus.esb.sign.utils.Signable;
import com.venus.esb.utils.HTTP;
import com.venus.esb.utils.Injects;
import org.junit.Test;

import java.io.Serializable;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * Created with IntelliJ IDEA.
 * Description: 验证api管理器
 * User: lingminjun
 * Date: 2018-09-26
 * Time: 下午2:17
 */
public class APIManagerTest {


    String static_pri_key = ESBConfigCenter.instance().getPriRSAKey();
    String static_pub_key = ESBConfigCenter.instance().getPubRSAKey();
    String static_sm = ESBAPIAlgorithm.RSA.name();

    public static class Resp<T> implements Serializable {
        public Response stat;
//        public List<T> content;
        public T[] content;
    }

    public static class TokenResp extends Resp<ESBToken> {

    }

    public static class DeviceTokenResp extends Resp<ESBDeviceToken> {

    }

    //加签参数
    public void addMD5Sign(String sm, String key,Map<String,String> params) throws UnsupportedEncodingException {

        if (sm == null || sm.length() == 0) {
            sm = static_sm;
        }

        params.put(ESBSTDKeys.SIGNATURE_METHOD_KEY,sm);

        StringBuilder builder = ESBAPISignature.getSortedParameters(params);
        Signable signature = ESBAPISignature.getSignable(sm, (key == null || key.length() == 0) ? static_pub_key : key ,static_pri_key);

        String sign = signature.sign(builder.toString().getBytes(ESBConsts.UTF8));
        params.put(ESBSTDKeys.SIGN_KEY,sign);
    }

    public StringBuilder getSortedParameters(Map<String, String> params) throws UnsupportedEncodingException {
        HashMap<String,String> map = new HashMap<>();
        for (Map.Entry<String,String> entry : params.entrySet()) {
            map.put(URLEncoder.encode(entry.getKey(),ESBConsts.UTF8_STR),URLEncoder.encode(entry.getValue(),ESBConsts.UTF8_STR));
        }
        return ESBAPISignature.getSortedParameters(map);
    }

    public class AObj {
        public Long age = 100l;
        public Date time = new Date();
    }

    public class BObj {
        public long age;
        public long time;
    }

    @Test
    public void testInject() throws Exception {
        AObj obj = new AObj();
        BObj b = new BObj();
        Injects.fill(obj,b);
        System.out.println(b.age + "  " + b.time);
        b.age = 122;
        b.time = System.currentTimeMillis();
        AObj a = new AObj();
        Injects.fill(b,a);
        System.out.println(a.age + "  " + a.time);

    }

    @Test
    public void testQueryBackTables() throws Exception {

        DBUtil.checkAndDropBackTables();

    }


    @Test
    public void testRefreshAPI() throws Exception {

        Map<String,String> params = new HashMap<>();
        params.put("APISelector","sprmvc.sprmvc.test1");
        addMD5Sign(null,null,params);

        String json = HTTP.post("http://localhost:8080/gw.api", params);
        System.out.println("【"+json+"】");

    }

    @Test
    public void testInsertAPI() throws Exception {

        List<ESBAPIInfo> list = JSON.parseArray(api_json,ESBAPIInfo.class);
        DBUtil.upapis(list);

    }


    String api_json0 = "";


    String api_json = "[{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"sayHello\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.sfebiz.demo.entity.DemoEntity\",\"declareType\":\"com.sfebiz.demo.entity.DemoEntity\",\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"displayType\":\"com.sfebiz.demo.entity.DemoEntity\",\"finalType\":\"com.sfebiz.demo.entity.DemoEntity\",\"isArray\":false,\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"security\":0,\"structs\":{\"com.sfebiz.demo.entity.DemoEntity\":{\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"fields\":[{\"desc\":\"id多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"id\",\"required\":false,\"type\":\"int\"},{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"随便写个复合属性\",\"isArray\":false,\"name\":\"sub\",\"required\":false,\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}],\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"com.sfebiz.demo.entity.DemoSubEntity\":{\"desc\":\"子属性\",\"fields\":[{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}}},\"createAt\":1543158232589,\"invocations\":{\"c406e709691091e832b2e1f35389f70f\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"sayHello\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232589},{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"webLogin\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"},{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"pwsd\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBToken\",\"declareType\":\"com.venus.esb.lang.ESBToken\",\"desc\":\"令牌认证类型\",\"displayType\":\"com.venus.esb.lang.ESBToken\",\"finalType\":\"com.venus.esb.lang.ESBToken\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBToken\"},\"security\":0,\"structs\":{\"com.venus.esb.lang.ESBToken\":{\"desc\":\"令牌认证类型\",\"fields\":[{\"desc\":\"认证是否成功\",\"isArray\":false,\"name\":\"success\",\"required\":false,\"type\":\"boolean\"},{\"desc\":\"access_token：表示访问令牌，必选项。将被写入到cookie，js可读（httpOnly=false）\",\"isArray\":false,\"name\":\"token\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"secret_token: 用于在不同domain间传递csrftoken, 只能在https(secure=true)传入, 将被写入到cookie，js不可读（httpOnly=true）\",\"isArray\":false,\"name\":\"stoken\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"refresh_token：用于刷新access_token（同理会刷新secret_token），可选项，不写入cookie，客户端保留好。\",\"isArray\":false,\"name\":\"refresh\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"issu_key：颁发公钥，加签秘钥（私钥保存在token中），必选项，不写入cookie，客户端保留好。\",\"isArray\":false,\"name\":\"key\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"expires_in：表示过期时间点，单位为秒。此字段随为entrust，但只有等于零时才被网关覆盖\",\"isArray\":false,\"name\":\"expire\",\"required\":false,\"type\":\"long\"},{\"desc\":\"scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。推荐【global,user,device,token,temporary】,可自定义\",\"isArray\":false,\"name\":\"scope\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"设备did\",\"isArray\":false,\"name\":\"did\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"用户id\",\"isArray\":false,\"name\":\"uid\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"账号id\",\"isArray\":false,\"name\":\"acct\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"用户信息\",\"isArray\":false,\"name\":\"user\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"额外参数\",\"isArray\":false,\"name\":\"exts\",\"required\":false,\"type\":\"com.venus.esb.lang.ESBExts\"}],\"type\":\"com.venus.esb.lang.ESBToken\"},\"com.venus.esb.lang.ESBExts\":{\"desc\":\"扩展参数类型定义,因为框架不支持map\",\"fields\":[{\"desc\":\"所有keys\",\"isArray\":true,\"name\":\"keys\",\"required\":false,\"type\":\"[Ljava.lang.String;\"},{\"desc\":\"所有values\",\"isArray\":true,\"name\":\"values\",\"required\":false,\"type\":\"[Ljava.lang.String;\"}],\"type\":\"com.venus.esb.lang.ESBExts\"}}},\"createAt\":1543158232620,\"invocations\":{\"46e0c59e898f1c7aa7dfdefdaaa8518a\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"webLogin\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"},{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"pwsd\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232620},{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"logDevice\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBDeviceToken\",\"declareType\":\"com.venus.esb.lang.ESBDeviceToken\",\"desc\":\"令牌认证类型\",\"displayType\":\"com.venus.esb.lang.ESBDeviceToken\",\"finalType\":\"com.venus.esb.lang.ESBDeviceToken\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBDeviceToken\"},\"security\":0,\"structs\":{\"com.venus.esb.lang.ESBCookie\":{\"desc\":\"专门为http定制的cookie\",\"fields\":[{\"desc\":\"名称key\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"具体值\",\"isArray\":false,\"name\":\"value\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"所属域名\",\"isArray\":false,\"name\":\"domain\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"有效期\",\"isArray\":false,\"name\":\"maxAge\",\"required\":false,\"type\":\"int\"},{\"desc\":\"只支持https\",\"isArray\":false,\"name\":\"secure\",\"required\":false,\"type\":\"boolean\"},{\"desc\":\"针对路径filter\",\"isArray\":false,\"name\":\"path\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"版本\",\"isArray\":false,\"name\":\"version\",\"required\":false,\"type\":\"int\"},{\"desc\":\"不允许客服端读写，防XSS和CSRF攻击\",\"isArray\":false,\"name\":\"httpOnly\",\"required\":false,\"type\":\"boolean\"}],\"type\":\"com.venus.esb.lang.ESBCookie\"},\"com.venus.esb.lang.ESBDeviceToken\":{\"desc\":\"令牌认证类型\",\"fields\":[{\"desc\":\"认证是否成功\",\"isArray\":false,\"name\":\"success\",\"required\":false,\"type\":\"boolean\"},{\"desc\":\"device token\",\"isArray\":false,\"name\":\"token\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"device issu key\",\"isArray\":false,\"name\":\"key\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。推荐【global,user,device,token,temporary】,可自定义\",\"isArray\":false,\"name\":\"scope\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"设备did\",\"isArray\":false,\"name\":\"did\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.venus.esb.lang.ESBDeviceToken\"}}},\"createAt\":1543158232625,\"invocations\":{\"16c39b221a2faf358b9ec657a4b05150\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"logDevice\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"},{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":true,\"name\":\"_cookie\",\"type\":\"com.venus.esb.lang.ESBCookie\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232625},{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"mobileLogin\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"},{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"pwsd\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBToken\",\"declareType\":\"com.venus.esb.lang.ESBToken\",\"desc\":\"令牌认证类型\",\"displayType\":\"com.venus.esb.lang.ESBToken\",\"finalType\":\"com.venus.esb.lang.ESBToken\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBToken\"},\"security\":1,\"structs\":{\"com.venus.esb.lang.ESBToken\":{\"desc\":\"令牌认证类型\",\"fields\":[{\"desc\":\"认证是否成功\",\"isArray\":false,\"name\":\"success\",\"required\":false,\"type\":\"boolean\"},{\"desc\":\"access_token：表示访问令牌，必选项。将被写入到cookie，js可读（httpOnly=false）\",\"isArray\":false,\"name\":\"token\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"secret_token: 用于在不同domain间传递csrftoken, 只能在https(secure=true)传入, 将被写入到cookie，js不可读（httpOnly=true）\",\"isArray\":false,\"name\":\"stoken\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"refresh_token：用于刷新access_token（同理会刷新secret_token），可选项，不写入cookie，客户端保留好。\",\"isArray\":false,\"name\":\"refresh\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"issu_key：颁发公钥，加签秘钥（私钥保存在token中），必选项，不写入cookie，客户端保留好。\",\"isArray\":false,\"name\":\"key\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"expires_in：表示过期时间点，单位为秒。此字段随为entrust，但只有等于零时才被网关覆盖\",\"isArray\":false,\"name\":\"expire\",\"required\":false,\"type\":\"long\"},{\"desc\":\"scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。推荐【global,user,device,token,temporary】,可自定义\",\"isArray\":false,\"name\":\"scope\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"设备did\",\"isArray\":false,\"name\":\"did\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"用户id\",\"isArray\":false,\"name\":\"uid\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"账号id\",\"isArray\":false,\"name\":\"acct\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"用户信息\",\"isArray\":false,\"name\":\"user\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"额外参数\",\"isArray\":false,\"name\":\"exts\",\"required\":false,\"type\":\"com.venus.esb.lang.ESBExts\"}],\"type\":\"com.venus.esb.lang.ESBToken\"},\"com.venus.esb.lang.ESBExts\":{\"desc\":\"扩展参数类型定义,因为框架不支持map\",\"fields\":[{\"desc\":\"所有keys\",\"isArray\":true,\"name\":\"keys\",\"required\":false,\"type\":\"[Ljava.lang.String;\"},{\"desc\":\"所有values\",\"isArray\":true,\"name\":\"values\",\"required\":false,\"type\":\"[Ljava.lang.String;\"}],\"type\":\"com.venus.esb.lang.ESBExts\"}}},\"createAt\":1543158232627,\"invocations\":{\"4655dcf235bdda7fa9dfb07c0f1aba64\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"mobileLogin\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"},{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"pwsd\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232627},{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"sayFriend\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBString\",\"declareType\":\"com.venus.esb.lang.ESBString\",\"desc\":\"String类型\",\"displayType\":\"com.venus.esb.lang.ESBString\",\"finalType\":\"com.venus.esb.lang.ESBString\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBString\"},\"security\":256,\"structs\":{\"com.venus.esb.lang.ESBString\":{\"desc\":\"String类型\",\"fields\":[{\"desc\":\"值\",\"isArray\":false,\"name\":\"value\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.venus.esb.lang.ESBString\"}}},\"createAt\":1543158232628,\"invocations\":{\"5bade11b1725d95b0c46353b1a9e02e3\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"sayFriend\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232628},{\"api\":{\"desc\":\"demo getResByThirdPartyId多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"helloThirdParty\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":true,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"输入参数多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"in\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBString\",\"declareType\":\"com.venus.esb.lang.ESBString\",\"desc\":\"String类型\",\"displayType\":\"com.venus.esb.lang.ESBString\",\"finalType\":\"com.venus.esb.lang.ESBString\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBString\"},\"security\":65536,\"structs\":{\"com.venus.esb.lang.ESBString\":{\"desc\":\"String类型\",\"fields\":[{\"desc\":\"值\",\"isArray\":false,\"name\":\"value\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.venus.esb.lang.ESBString\"}}},\"createAt\":1543158232629,\"invocations\":{\"33f5bf02972b94356e8b09d01a4aacde\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"helloThirdParty\",\"paramTypes\":[{\"desc\":\"输入参数多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"in\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232629},{\"api\":{\"desc\":\"test redirect多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"testRedirect\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"输入参数1多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"something\",\"required\":true,\"type\":\"com.sfebiz.demo.entity.DemoEnum\"},{\"defaultValue\":\"\",\"desc\":\"输入参数2多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"another\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBRawString\",\"declareType\":\"com.venus.esb.lang.ESBRawString\",\"desc\":\"原始字符串类型\",\"displayType\":\"com.venus.esb.lang.ESBRawString\",\"finalType\":\"com.venus.esb.lang.ESBRawString\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBRawString\"},\"security\":0,\"structs\":{\"com.venus.esb.lang.ESBRawString\":{\"desc\":\"原始字符串类型\",\"fields\":[{\"desc\":\"值的编码类型，http/https contentType设置\",\"isArray\":false,\"name\":\"contentType\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"值\",\"isArray\":false,\"name\":\"value\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.venus.esb.lang.ESBRawString\"},\"com.sfebiz.demo.entity.DemoEnum\":{\"desc\":\"字母枚举多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"fields\":[{\"desc\":\"this is A多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"A\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"this is B多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"B\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"this is C多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"C\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"this is D多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"D\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.sfebiz.demo.entity.DemoEnum\"}}},\"createAt\":1543158232629,\"invocations\":{\"149f90b1e0b86e15733e8a2ce12ec055\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"testRedirect\",\"paramTypes\":[{\"desc\":\"输入参数1多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"something\",\"type\":\"com.sfebiz.demo.entity.DemoEnum\"},{\"desc\":\"输入参数2多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"another\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232629},{\"api\":{\"desc\":\"测试entity参数\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"testEntity\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"entity参数\",\"isArray\":false,\"name\":\"param\",\"required\":true,\"type\":\"com.sfebiz.demo.entity.DemoParam\"}],\"returned\":{\"coreType\":\"com.sfebiz.demo.entity.DemoEntity\",\"declareType\":\"com.sfebiz.demo.entity.DemoEntity\",\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"displayType\":\"com.sfebiz.demo.entity.DemoEntity\",\"finalType\":\"com.sfebiz.demo.entity.DemoEntity\",\"isArray\":false,\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"security\":0,\"structs\":{\"com.sfebiz.demo.entity.DemoEntity\":{\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"fields\":[{\"desc\":\"id多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"id\",\"required\":false,\"type\":\"int\"},{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"随便写个复合属性\",\"isArray\":false,\"name\":\"sub\",\"required\":false,\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}],\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"com.sfebiz.demo.entity.DemoSubEntity\":{\"desc\":\"子属性\",\"fields\":[{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"},\"com.sfebiz.demo.entity.DemoParam\":{\"desc\":\"测试参数\",\"fields\":[{\"desc\":\"测试参数name\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"测试参数age\",\"isArray\":false,\"name\":\"age\",\"required\":false,\"type\":\"int\"}],\"type\":\"com.sfebiz.demo.entity.DemoParam\"}}},\"createAt\":1543158232630,\"invocations\":{\"b6ab36aaf6f03dc10e04aca74d39cae6\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"testEntity\",\"paramTypes\":[{\"desc\":\"entity参数\",\"isArray\":false,\"isList\":false,\"name\":\"param\",\"type\":\"com.sfebiz.demo.entity.DemoParam\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232630},{\"api\":{\"desc\":\"测试array参数\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"testArray\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"int array 参数\",\"isArray\":true,\"name\":\"param\",\"required\":true,\"type\":\"[I\"},{\"defaultValue\":\"\",\"desc\":\"str array 参数\",\"isArray\":true,\"name\":\"strs\",\"required\":true,\"type\":\"[Ljava.lang.String;\"}],\"returned\":{\"coreType\":\"com.sfebiz.demo.entity.DemoEntity\",\"declareType\":\"com.sfebiz.demo.entity.DemoEntity\",\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"displayType\":\"com.sfebiz.demo.entity.DemoEntity\",\"finalType\":\"com.sfebiz.demo.entity.DemoEntity\",\"isArray\":false,\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"security\":0,\"structs\":{\"com.sfebiz.demo.entity.DemoEntity\":{\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"fields\":[{\"desc\":\"id多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"id\",\"required\":false,\"type\":\"int\"},{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"随便写个复合属性\",\"isArray\":false,\"name\":\"sub\",\"required\":false,\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}],\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"com.sfebiz.demo.entity.DemoSubEntity\":{\"desc\":\"子属性\",\"fields\":[{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}}},\"createAt\":1543158232631,\"invocations\":{\"50e24de1eb77aed61c3c3a5ae42d3b91\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"testArray\",\"paramTypes\":[{\"desc\":\"int array 参数\",\"isArray\":true,\"isList\":false,\"name\":\"param\",\"type\":\"[I\"},{\"desc\":\"str array 参数\",\"isArray\":true,\"isList\":false,\"name\":\"strs\",\"type\":\"[Ljava.lang.String;\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1543158232631}]\n";


    String api_json1 = "[{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"sayHello\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.sfebiz.demo.entity.DemoEntity\",\"declareType\":\"com.sfebiz.demo.entity.DemoEntity\",\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"displayType\":\"com.sfebiz.demo.entity.DemoEntity\",\"finalType\":\"com.sfebiz.demo.entity.DemoEntity\",\"isArray\":false,\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"security\":0,\"structs\":{\"com.sfebiz.demo.entity.DemoEntity\":{\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"fields\":[{\"desc\":\"id多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"id\",\"required\":false,\"type\":\"int\"},{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"随便写个复合属性\",\"isArray\":false,\"name\":\"sub\",\"required\":false,\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}],\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"com.sfebiz.demo.entity.DemoSubEntity\":{\"desc\":\"子属性\",\"fields\":[{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}}},\"createAt\":1539072198477,\"invocations\":{\"c406e709691091e832b2e1f35389f70f\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"sayHello\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198477},{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"webLogin\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"},{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"pwsd\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBToken\",\"declareType\":\"com.venus.esb.lang.ESBToken\",\"desc\":\"令牌认证类型\",\"displayType\":\"com.venus.esb.lang.ESBToken\",\"finalType\":\"com.venus.esb.lang.ESBToken\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBToken\"},\"security\":0,\"structs\":{\"com.venus.esb.lang.ESBExts\":{\"desc\":\"扩展参数类型定义,因为框架不支持map\",\"fields\":[{\"desc\":\"所有keys\",\"isArray\":true,\"name\":\"keys\",\"required\":false,\"type\":\"[Ljava.lang.String;\"},{\"desc\":\"所有values\",\"isArray\":true,\"name\":\"values\",\"required\":false,\"type\":\"[Ljava.lang.String;\"}],\"type\":\"com.venus.esb.lang.ESBExts\"},\"com.venus.esb.lang.ESBToken\":{\"desc\":\"令牌认证类型\",\"fields\":[{\"desc\":\"认证是否成功\",\"isArray\":false,\"name\":\"success\",\"required\":false,\"type\":\"boolean\"},{\"desc\":\"access_token：表示访问令牌，必选项。将被写入到cookie，js可读（httpOnly=false）\",\"isArray\":false,\"name\":\"token\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"secret_token: 用于在不同domain间传递csrftoken, 只能在https(secure=true)传入, 将被写入到cookie，js不可读（httpOnly=true）\",\"isArray\":false,\"name\":\"stoken\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"refresh_token：用于刷新access_token（同理会刷新secret_token），可选项，不写入cookie，客户端保留好。\",\"isArray\":false,\"name\":\"refresh\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"issu_key：颁发公钥，加签秘钥（私钥保存在token中），必选项，不写入cookie，客户端保留好。\",\"isArray\":false,\"name\":\"key\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。\",\"isArray\":false,\"name\":\"expire\",\"required\":false,\"type\":\"long\"},{\"desc\":\"scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。推荐【global,user,device,token,temporary】,可自定义\",\"isArray\":false,\"name\":\"scope\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"设备did\",\"isArray\":false,\"name\":\"did\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"用户id\",\"isArray\":false,\"name\":\"uid\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"用户信息\",\"isArray\":false,\"name\":\"user\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"额外参数\",\"isArray\":false,\"name\":\"exts\",\"required\":false,\"type\":\"com.venus.esb.lang.ESBExts\"}],\"type\":\"com.venus.esb.lang.ESBToken\"}}},\"createAt\":1539072198502,\"invocations\":{\"46e0c59e898f1c7aa7dfdefdaaa8518a\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"webLogin\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"},{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"pwsd\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198502},{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"logDevice\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBDeviceToken\",\"declareType\":\"com.venus.esb.lang.ESBDeviceToken\",\"desc\":\"令牌认证类型\",\"displayType\":\"com.venus.esb.lang.ESBDeviceToken\",\"finalType\":\"com.venus.esb.lang.ESBDeviceToken\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBDeviceToken\"},\"security\":0,\"structs\":{\"com.venus.esb.lang.ESBDeviceToken\":{\"desc\":\"令牌认证类型\",\"fields\":[{\"desc\":\"认证是否成功\",\"isArray\":false,\"name\":\"success\",\"required\":false,\"type\":\"boolean\"},{\"desc\":\"device token\",\"isArray\":false,\"name\":\"token\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"device issu key\",\"isArray\":false,\"name\":\"key\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。推荐【global,user,device,token,temporary】,可自定义\",\"isArray\":false,\"name\":\"scope\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"设备did\",\"isArray\":false,\"name\":\"did\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.venus.esb.lang.ESBDeviceToken\"}}},\"createAt\":1539072198508,\"invocations\":{\"705653147da39c17943f703248f1bfbf\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"logDevice\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198508},{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"mobileLogin\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"},{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"pwsd\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBToken\",\"declareType\":\"com.venus.esb.lang.ESBToken\",\"desc\":\"令牌认证类型\",\"displayType\":\"com.venus.esb.lang.ESBToken\",\"finalType\":\"com.venus.esb.lang.ESBToken\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBToken\"},\"security\":1,\"structs\":{\"com.venus.esb.lang.ESBExts\":{\"desc\":\"扩展参数类型定义,因为框架不支持map\",\"fields\":[{\"desc\":\"所有keys\",\"isArray\":true,\"name\":\"keys\",\"required\":false,\"type\":\"[Ljava.lang.String;\"},{\"desc\":\"所有values\",\"isArray\":true,\"name\":\"values\",\"required\":false,\"type\":\"[Ljava.lang.String;\"}],\"type\":\"com.venus.esb.lang.ESBExts\"},\"com.venus.esb.lang.ESBToken\":{\"desc\":\"令牌认证类型\",\"fields\":[{\"desc\":\"认证是否成功\",\"isArray\":false,\"name\":\"success\",\"required\":false,\"type\":\"boolean\"},{\"desc\":\"access_token：表示访问令牌，必选项。将被写入到cookie，js可读（httpOnly=false）\",\"isArray\":false,\"name\":\"token\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"secret_token: 用于在不同domain间传递csrftoken, 只能在https(secure=true)传入, 将被写入到cookie，js不可读（httpOnly=true）\",\"isArray\":false,\"name\":\"stoken\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"refresh_token：用于刷新access_token（同理会刷新secret_token），可选项，不写入cookie，客户端保留好。\",\"isArray\":false,\"name\":\"refresh\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"issu_key：颁发公钥，加签秘钥（私钥保存在token中），必选项，不写入cookie，客户端保留好。\",\"isArray\":false,\"name\":\"key\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。\",\"isArray\":false,\"name\":\"expire\",\"required\":false,\"type\":\"long\"},{\"desc\":\"scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。推荐【global,user,device,token,temporary】,可自定义\",\"isArray\":false,\"name\":\"scope\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"设备did\",\"isArray\":false,\"name\":\"did\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"用户id\",\"isArray\":false,\"name\":\"uid\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"用户信息\",\"isArray\":false,\"name\":\"user\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"额外参数\",\"isArray\":false,\"name\":\"exts\",\"required\":false,\"type\":\"com.venus.esb.lang.ESBExts\"}],\"type\":\"com.venus.esb.lang.ESBToken\"}}},\"createAt\":1539072198509,\"invocations\":{\"4655dcf235bdda7fa9dfb07c0f1aba64\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"mobileLogin\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"},{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"pwsd\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198509},{\"api\":{\"desc\":\"demo test多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"sayFriend\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBString\",\"declareType\":\"com.venus.esb.lang.ESBString\",\"desc\":\"String类型\",\"displayType\":\"com.venus.esb.lang.ESBString\",\"finalType\":\"com.venus.esb.lang.ESBString\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBString\"},\"security\":256,\"structs\":{\"com.venus.esb.lang.ESBString\":{\"desc\":\"String类型\",\"fields\":[{\"desc\":\"值\",\"isArray\":false,\"name\":\"value\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.venus.esb.lang.ESBString\"}}},\"createAt\":1539072198510,\"invocations\":{\"5bade11b1725d95b0c46353b1a9e02e3\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"sayFriend\",\"paramTypes\":[{\"desc\":\"say hello多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"name\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198510},{\"api\":{\"desc\":\"demo getResByThirdPartyId多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"helloThirdParty\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":true,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"输入参数多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"in\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBString\",\"declareType\":\"com.venus.esb.lang.ESBString\",\"desc\":\"String类型\",\"displayType\":\"com.venus.esb.lang.ESBString\",\"finalType\":\"com.venus.esb.lang.ESBString\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBString\"},\"security\":65536,\"structs\":{\"com.venus.esb.lang.ESBString\":{\"desc\":\"String类型\",\"fields\":[{\"desc\":\"值\",\"isArray\":false,\"name\":\"value\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.venus.esb.lang.ESBString\"}}},\"createAt\":1539072198510,\"invocations\":{\"33f5bf02972b94356e8b09d01a4aacde\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"helloThirdParty\",\"paramTypes\":[{\"desc\":\"输入参数多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"in\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198510},{\"api\":{\"desc\":\"test redirect多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"testRedirect\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"输入参数1多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"something\",\"required\":true,\"type\":\"com.sfebiz.demo.entity.DemoEnum\"},{\"defaultValue\":\"\",\"desc\":\"输入参数2多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"another\",\"required\":true,\"type\":\"java.lang.String\"}],\"returned\":{\"coreType\":\"com.venus.esb.lang.ESBRawString\",\"declareType\":\"com.venus.esb.lang.ESBRawString\",\"desc\":\"原始字符串类型\",\"displayType\":\"com.venus.esb.lang.ESBRawString\",\"finalType\":\"com.venus.esb.lang.ESBRawString\",\"isArray\":false,\"type\":\"com.venus.esb.lang.ESBRawString\"},\"security\":0,\"structs\":{\"com.sfebiz.demo.entity.DemoEnum\":{\"desc\":\"字母枚举多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"fields\":[{\"desc\":\"this is A多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"A\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"this is B多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"B\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"this is C多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"C\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"this is D多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"D\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.sfebiz.demo.entity.DemoEnum\"},\"com.venus.esb.lang.ESBRawString\":{\"desc\":\"原始字符串类型\",\"fields\":[{\"desc\":\"值的编码类型，http/https contentType设置\",\"isArray\":false,\"name\":\"contentType\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"值\",\"isArray\":false,\"name\":\"value\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.venus.esb.lang.ESBRawString\"}}},\"createAt\":1539072198511,\"invocations\":{\"149f90b1e0b86e15733e8a2ce12ec055\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"testRedirect\",\"paramTypes\":[{\"desc\":\"输入参数1多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"something\",\"type\":\"com.sfebiz.demo.entity.DemoEnum\"},{\"desc\":\"输入参数2多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"isList\":false,\"name\":\"another\",\"type\":\"java.lang.String\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198511},{\"api\":{\"desc\":\"测试entity参数\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"testEntity\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"entity参数\",\"isArray\":false,\"name\":\"param\",\"required\":true,\"type\":\"com.sfebiz.demo.entity.DemoParam\"}],\"returned\":{\"coreType\":\"com.sfebiz.demo.entity.DemoEntity\",\"declareType\":\"com.sfebiz.demo.entity.DemoEntity\",\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"displayType\":\"com.sfebiz.demo.entity.DemoEntity\",\"finalType\":\"com.sfebiz.demo.entity.DemoEntity\",\"isArray\":false,\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"security\":0,\"structs\":{\"com.sfebiz.demo.entity.DemoEntity\":{\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"fields\":[{\"desc\":\"id多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"id\",\"required\":false,\"type\":\"int\"},{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"随便写个复合属性\",\"isArray\":false,\"name\":\"sub\",\"required\":false,\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}],\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"com.sfebiz.demo.entity.DemoParam\":{\"desc\":\"测试参数\",\"fields\":[{\"desc\":\"测试参数name\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"测试参数age\",\"isArray\":false,\"name\":\"age\",\"required\":false,\"type\":\"int\"}],\"type\":\"com.sfebiz.demo.entity.DemoParam\"},\"com.sfebiz.demo.entity.DemoSubEntity\":{\"desc\":\"子属性\",\"fields\":[{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}}},\"createAt\":1539072198511,\"invocations\":{\"b6ab36aaf6f03dc10e04aca74d39cae6\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"testEntity\",\"paramTypes\":[{\"desc\":\"entity参数\",\"isArray\":false,\"isList\":false,\"name\":\"param\",\"type\":\"com.sfebiz.demo.entity.DemoParam\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198511},{\"api\":{\"desc\":\"测试array参数\",\"detail\":\"\",\"domain\":\"demo\",\"methodName\":\"testArray\",\"module\":\"demo\",\"needVerify\":false,\"openAPI\":false,\"owner\":\"demo\",\"params\":[{\"defaultValue\":\"\",\"desc\":\"int array 参数\",\"isArray\":true,\"name\":\"param\",\"required\":true,\"type\":\"[I\"},{\"defaultValue\":\"\",\"desc\":\"str array 参数\",\"isArray\":true,\"name\":\"strs\",\"required\":true,\"type\":\"[Ljava.lang.String;\"}],\"returned\":{\"coreType\":\"com.sfebiz.demo.entity.DemoEntity\",\"declareType\":\"com.sfebiz.demo.entity.DemoEntity\",\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"displayType\":\"com.sfebiz.demo.entity.DemoEntity\",\"finalType\":\"com.sfebiz.demo.entity.DemoEntity\",\"isArray\":false,\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"security\":0,\"structs\":{\"com.sfebiz.demo.entity.DemoEntity\":{\"desc\":\"demo entity多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"fields\":[{\"desc\":\"id多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"id\",\"required\":false,\"type\":\"int\"},{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"},{\"desc\":\"随便写个复合属性\",\"isArray\":false,\"name\":\"sub\",\"required\":false,\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}],\"type\":\"com.sfebiz.demo.entity.DemoEntity\"},\"com.sfebiz.demo.entity.DemoSubEntity\":{\"desc\":\"子属性\",\"fields\":[{\"desc\":\"name多语言测试. \\nen-us:multi-language test \\nja-jp:多言語テスト\",\"isArray\":false,\"name\":\"name\",\"required\":false,\"type\":\"java.lang.String\"}],\"type\":\"com.sfebiz.demo.entity.DemoSubEntity\"}}},\"createAt\":1539072198512,\"invocations\":{\"50e24de1eb77aed61c3c3a5ae42d3b91\":{\"encoding\":\"UTF-8\",\"method\":\"generic\",\"methodName\":\"testArray\",\"paramTypes\":[{\"desc\":\"int array 参数\",\"isArray\":true,\"isList\":false,\"name\":\"param\",\"type\":\"[I\"},{\"desc\":\"str array 参数\",\"isArray\":true,\"isList\":false,\"name\":\"strs\",\"type\":\"[Ljava.lang.String;\"}],\"protocol\":\"dubbo 4.0.5\",\"retries\":0,\"scheme\":\"dubbo\",\"serialization\":\"JSON\",\"serverName\":\"com.sfebiz.demo.api.DemoService\",\"serverPort\":20880,\"timeout\":30000}},\"mock\":false,\"modifyAt\":1539072198512}]";
}
